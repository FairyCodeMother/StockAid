<% content_for :title, "Edit Purchase" %>

<% content_for :content do %>
  <%= render partial: "purchases/purchase_row_template" %>
  <%= render partial: "purchases/purchase_shipment_row_template" %>

  <%= javascript_tag do %>
    var data = data || {};
    data.categories = <%= Category.to_json.html_safe %>;
    data.purchase = <%= @serialized.html_safe %>;
    data.vendors = <%= @vendors.to_json.html_safe %>;

    addPurchaseRows();
    <!-- disableFormWhenClosed(); -->
  <% end %>

  <%= form_for @purchase, html: { data: { live_guarded: true } } do |f| %>
    <%= render partial: "purchases/purchase_header", locals: { f: f } %>
    <%= render partial: "purchases/purchase_table", locals: { f: f } %>
    <%= render partial: "purchases/purchase_buttons", locals: { purchase: @purchase } %>
  <% end %>
<% end %>
